apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: acicontainersoperators.aci.ctrl
spec:
  group: aci.ctrl
  names:
    kind: AciContainersOperator
    listKind: AciContainersOperatorList
    plural: acicontainersoperators
    singular: acicontainersoperator
  scope: Namespaced
  versions:
  - name: v1alpha1
    served: true
    storage: true
    subresources:
      status: {}
    schema:
      openAPIV3Schema:
        description: acicontainersoperator owns the lifecycle of ACI objects in the cluster
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            description: AciContainersOperatorSpec defines the desired spec for ACI Objects
            properties:
              flavor:
                type: string
              config:
                type: string
            type: object
          status:
            description: AciContainersOperatorStatus defines the successful completion of AciContainersOperator
            properties:
              status:
                type: boolean
            type: object
        required:
        - spec
        type: object
---
apiVersion: v1
kind: Namespace
metadata:
  name: aci-containers-system
  labels:
    aci-containers-config-version: "dummy"
    network-plugin: aci-containers
    openshift.io/run-level: "0"
  annotations:
    openshift.io/node-selector: ''
---
apiVersion: scheduling.k8s.io/v1
kind: PriorityClass
metadata:
  name: acicni-priority
value: 1000000000
globalDefault: false
description: "This priority class is used for ACI-CNI resources"
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: network-attachment-definitions.k8s.cni.cncf.io
spec:
  group: k8s.cni.cncf.io
  scope: Namespaced
  names:
    plural: network-attachment-definitions
    singular: network-attachment-definition
    kind: NetworkAttachmentDefinition
    shortNames:
    - net-attach-def
  versions:
  - name: v1
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        description: >-
          'NetworkAttachmentDefinition is a CRD schema specified by the Network Plumbing
          Working Group to express the intent for attaching pods to one or more logical or physical
          networks. More information available at: https://github.com/k8snetworkplumbingwg/multi-net-spec'
        type: object
        properties:
          apiVersion:
            description: >-
              'APIVersion defines the versioned schema of this represen
              tation of an object. Servers should convert recognized schemas to the
              latest internal value, and may reject unrecognized values. More info:
              https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: >-
              'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: 'NetworkAttachmentDefinition spec defines the desired state of a network attachment'
            type: object
            properties:
              config:
                description: 'NetworkAttachmentDefinition config is a JSON-formatted CNI configuration'
                type: string
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.0
  name: nodefabricnetworkattachments.aci.fabricattachment
spec:
  group: aci.fabricattachment
  names:
    kind: NodeFabricNetworkAttachment
    listKind: NodeFabricNetworkAttachmentList
    plural: nodefabricnetworkattachments
    shortNames:
    - nfna
    singular: nodefabricnetworkattachment
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: NodeFabricAttachment is the Schema for the FabricAttachments API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: NodeFabricAttachmentSpec defines the desired state of network attachment to the fabric
            properties:
              aciTopology:
                additionalProperties:
                  properties:
                    fabricLink:
                      items:
                        type: string
                      type: array
                    pods:
                      items:
                        properties:
                          localIface:
                            type: string
                          podRef:
                            properties:
                              name:
                                type: string
                              namespace:
                                type: string
                            required:
                            - name
                            - namespace
                            type: object
                        type: object
                      type: array
                  type: object
                description: Map of iface to fabricLink
                type: object
              encapVlan:
                properties:
                  encapRef:
                    properties:
                      key:
                        type: string
                      nadVlanMap:
                        type: string
                    required:
                    - key
                    - nadVlanMap
                    type: object
                  mode:
                    type: string
                  vlanList:
                    type: string
                type: object
              networkRef:
                description: 'INSERT ADDITIONAL SPEC FIELDS - desired state of cluster Important: Run "operator-sdk generate k8s" to regenerate code after modifying this file Add custom validation using kubebuilder tags: https://book.kubebuilder.io/beyond_basics/generating_crd.html NetworkRef is the ns/net-att-def name, used as part of the epg ns-<NetworkName>'
                properties:
                  name:
                    type: string
                  namespace:
                    type: string
                required:
                - name
                - namespace
                type: object
              nodeName:
                type: string
              primaryCni:
                description: 'informational: primaryCNI sriov/macvlan/ipvlan/bridge'
                type: string
            required:
            - networkRef
            type: object
          status:
            description: NodeFabricAttachmentStatus defines the observed state of FabricAttachment
            properties:
              state:
                description: 'INSERT ADDITIONAL STATUS FIELD - define observed state of cluster Important: Run "operator-sdk generate k8s" to regenerate code after modifying this file7 Add custom validation using kubebuilder tags: https://book.kubebuilder.io/beyond_basics/generating_crd.html'
                type: string
            type: object
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.0
  name: nadvlanmaps.aci.fabricattachment
spec:
  group: aci.fabricattachment
  names:
    kind: NadVlanMap
    listKind: NadVlanMapList
    plural: nadvlanmaps
    singular: nadvlanmap
  scope: Cluster
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: NadVlanMap is the Schema for FabricAttachments NAD name to vlan mapping API
        properties:
          apiVersion:
            description: >-
              'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: >-
              'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            properties:
              nadVlanMapping:
                additionalProperties:
                  items:
                    properties:
                      label:
                        type: string
                      vlans:
                        type: string
                    required:
                    - vlans
                    type: object
                  type: array
                description: NAD namespace/name to vlan list mapping
                type: object
            required:
            - nadVlanMapping
            type: object
          status:
            properties:
              status:
                type: string
            type: object
        required:
        - spec
        type: object
        x-kubernetes-validations:
        - rule: "self.metadata.name == 'nad-vlan-map'"
          message: "Only one instance with name nad-vlan-map allowed"
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.0
  name: networkfabricconfigurations.aci.fabricattachment
spec:
  group: aci.fabricattachment
  names:
    kind: NetworkFabricConfiguration
    listKind: NetworkFabricConfigurationList
    plural: networkfabricconfigurations
    singular: networkfabricconfiguration
  scope: Cluster
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: NetworkFabricConfiguration allows additional configuration on NAD based and regular vlans created by aci controller
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            properties:
              nadVlanRefs:
                description: Refer to a NADVlanLabel defined in NadVlanMap CR
                items:
                  properties:
                    aeps:
                      items:
                        type: string
                      type: array
                    nadVlanLabel:
                      type: string
                  required:
                  - aeps
                  - nadVlanLabel
                  type: object
                type: array
              vlans:
                description: Refer to vlan/s directly
                items:
                  properties:
                    aeps:
                      items:
                        type: string
                      type: array
                    vlans:
                      type: string
                    epg:
                      type: object
                      properties:
                        applicationProfile:
                          type: string
                        discoveryType:
                          enum:
                          - LLDP
                          - AEP
                          - ""
                          type: string
                        name:
                          type: string
                        tenant:
                          type: string
                        contracts:
                          type: object
                          properties:
                            consumer:
                              type: array
                              items:
                                type: string
                            provider:
                              type: array
                              items:
                                type: string
                        bd:
                          type: object
                          properties:
                            name:
                              type: string
                            common-tenant:
                              type: boolean
                            subnets:
                              type: array
                              items:
                                type: object
                                properties:
                                  subnet:
                                    type: string
                                  scope:
                                    type: array
                                    items:
                                      type: string
                                      enum:
                                      - "shared-between-vrfs"
                                      - "advertise-externally"
                                  control:
                                    type: array
                                    items:
                                      type: string
                                      enum:
                                      - "nd-ra-prefix"
                                      - "querier-ip"
                                      - "no-default-svi-gateway"
                            vrf:
                              type: object
                              properties:
                                name:
                                  type: string
                                common-tenant:
                                  type: boolean
                  required:
                  - vlans
                  type: object
                type: array
            type: object
          status:
            description: NetworkFabricConfigurationStatus defines the observed state of NetworkFabricConfiguration
            properties:
              state:
                type: string
            type: object
        type: object
        x-kubernetes-validations:
        - message: Only one instance with name networkfabricconfiguration allowed
          rule: self.metadata.name == 'networkfabricconfiguration'
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.0
  name: fabricvlanpools.aci.fabricattachment
spec:
  group: aci.fabricattachment
  names:
    kind: FabricVlanPool
    listKind: FabricVlanPoolList
    plural: fabricvlanpools
    singular: fabricvlanpool
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: FabricVlanPool is the Schema for the fabricattachments vlanpool API
        properties:
          apiVersion:
            description: >-
              'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: >-
              'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: FabricVlanPoolSpec defines the list of vlans in the fabric vlan pool
            properties:
              vlans:
                items:
                  type: string
                type: array
            type: object
          status:
            description: FabricVlanPoolStatus defines the observed state of FabricVlanPool
            properties:
              error:
                type: string
              state:
                description: >-
                  'INSERT ADDITIONAL STATUS FIELD - define observed state
                  of cluster Important: Run "operator-sdk generate k8s" to regenerate
                  code after modifying this file7 Add custom validation using kubebuilder
                  tags: https://book.kubebuilder.io/beyond_basics/generating_crd.html'
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.0
  name: nodefabricnetworkl3peers.aci.fabricattachment
spec:
  group: aci.fabricattachment
  names:
    kind: NodeFabricNetworkL3Peer
    listKind: NodeFabricNetworkL3PeerList
    plural: nodefabricnetworkl3peers
    singular: nodefabricnetworkl3peer
  scope: Cluster
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: NodeFabricNetworkL3Peers displays the status of L3 peers on svis created by aci controller
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          status:
            properties:
              nadRefs:
                items:
                  properties:
                    nad:
                      properties:
                        name:
                          type: string
                        namespace:
                          type: string
                      required:
                      - name
                      - namespace
                      type: object
                    nodes:
                      items:
                        properties:
                          fabricL3Peers:
                            items:
                              properties:
                                encap:
                                  type: integer
                                fabricNodeIds:
                                  items:
                                    type: integer
                                  type: array
                                podId:
                                  type: integer
                              required:
                              - encap
                              - fabricNodeIds
                              - podId
                              type: object
                            type: array
                          nodeName:
                            type: string
                        required:
                        - nodeName
                        type: object
                      type: array
                  required:
                  - nad
                  type: object
                type: array
              peeringInfo:
                items:
                  properties:
                    asn:
                      type: integer
                    encap:
                      type: integer
                    fabricNodes:
                      items:
                        properties:
                          nodeRef:
                            properties:
                              nodeId:
                                type: integer
                              podId:
                                type: integer
                            required:
                            - nodeId
                            - podId
                            type: object
                          primaryAddress:
                            type: string
                          secondaryAddresses:
                            items:
                              type: string
                            type: array
                        required:
                        - nodeRef
                        - primaryAddress
                        type: object
                      type: array
                    secret:
                      properties:
                        name:
                          type: string
                        namespace:
                          type: string
                      required:
                      - name
                      - namespace
                      type: object
                  required:
                  - asn
                  - encap
                  type: object
                type: array
            type: object
        type: object
        x-kubernetes-validations:
        - rule: "self.metadata.name == 'nodefabricnetworkl3peer'"
          message: "Only one instance with name nodefabricnetworkl3peer"
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.0
  name: networkfabricl3configurations.aci.fabricattachment
spec:
  group: aci.fabricattachment
  names:
    kind: NetworkFabricL3Configuration
    listKind: NetworkFabricL3ConfigurationList
    plural: networkfabricl3configurations
    singular: networkfabricl3configuration
  scope: Cluster
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: NetworkFabricL3Configuration allows additional configuration on NAD based and regular vlans created by aci controller
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            properties:
              vrfs:
                items:
                  properties:
                    directlyConnectedNetworks:
                      items:
                        properties:
                          bgpPeerPolicy:
                            properties:
                              allowedSelfASCount:
                                minimum: 1
                                type: integer
                              ctrl:
                                items:
                                  enum:
                                  - AllowSelfAS
                                  - ASOverride
                                  - DisablePeerASCheck
                                  - Next-hopSelf
                                  - SendCommunity
                                  - SendExtendedCommunity
                                  - SendDomainPath
                                  - BFD
                                  - DisableConnectedCheck
                                  - RemovePrivateAS
                                  - RemoveAllPrivateAS
                                  - ReplacePrivateASWithLocalAS
                                  type: string
                                type: array
                              eBGPTTL:
                                maximum: 255
                                minimum: 1
                                type: integer
                              enabled:
                                type: boolean
                              localASN:
                                minimum: 1
                                type: integer
                              localASNConfig:
                                enum:
                                - noPrepend+replace-as+dual-as
                                - no-prepend
                                - no-options
                                - no-prepend+replace-as
                                type: string
                              peerASN:
                                minimum: 1
                                type: integer
                              prefix:
                                type: string
                              prefixPolicy:
                                type: string
                              secret:
                                description: Refers to a k8s secret which has the BGP password in data field
                                properties:
                                  name:
                                    type: string
                                  namespace:
                                    type: string
                                required:
                                - name
                                - namespace
                                type: object
                              weight:
                                maximum: 65535
                                minimum: 0
                                type: integer
                            required:
                            - peerASN
                            type: object
                          encap:
                            type: integer
                          l3OutName:
                            type: string
                          l3OutOnCommonTenant:
                            type: boolean
                          maxNodes:
                            minimum: 2
                            type: integer
                          nodes:
                            items:
                              properties:
                                nodeRef:
                                  properties:
                                    nodeId:
                                      type: integer
                                    podId:
                                      type: integer
                                  required:
                                  - nodeId
                                  - podId
                                  type: object
                                primaryAddress:
                                  type: string
                                secondaryAddresses:
                                  items:
                                    type: string
                                  type: array
                              required:
                              - nodeRef
                              - primaryAddress
                              type: object
                            type: array
                          primarySubnet:
                            type: string
                          requirePodToProvision:
                            type: boolean
                          subnets:
                            items:
                              properties:
                                connectedSubnet:
                                  type: string
                                floatingAddress:
                                  type: string
                                secondaryAddress:
                                  type: string
                              required:
                              - connectedSubnet
                              type: object
                            type: array
                          sviType:
                            default: floating_svi
                            enum:
                            - floating_svi
                            - svi
                            type: string
                          useExistingL3Out:
                            type: boolean
                        required:
                        - encap
                        - l3OutName
                        - primarySubnet
                        type: object
                      type: array
                    tenants:
                      items:
                        properties:
                          bgpInstances:
                            items:
                              properties:
                                action:
                                  type: string
                                maxPrefixes:
                                  type: integer
                                name:
                                  type: string
                              required:
                              - maxPrefixes
                              - name
                              type: object
                            type: array
                          commonTenant:
                            type: boolean
                          l3OutInstances:
                            items:
                              properties:
                                externalEpgs:
                                  items:
                                    properties:
                                      contracts:
                                        properties:
                                          consumer:
                                            items:
                                              type: string
                                            type: array
                                          provider:
                                            items:
                                              type: string
                                            type: array
                                        type: object
                                      name:
                                        type: string
                                      policyPrefixes:
                                        items:
                                          properties:
                                            aggregate:
                                              items:
                                                enum:
                                                - export-rtctrl
                                                - import-rtctrl
                                                - shared-rtctrl
                                                type: string
                                              maxItems: 3
                                              type: array
                                            scope:
                                              items:
                                                enum:
                                                - export-rtctrl
                                                - import-rtctrl
                                                - shared-rtctrl
                                                - shared-security
                                                - import-security
                                                type: string
                                              maxItems: 5
                                              type: array
                                            subnet:
                                              type: string
                                          required:
                                          - subnet
                                          type: object
                                        type: array
                                    required:
                                    - name
                                    - policyPrefixes
                                    type: object
                                  type: array
                                name:
                                  type: string
                                podRef:
                                  properties:
                                    podId:
                                      type: integer
                                  required:
                                  - podId
                                  type: object
                                rtCtrl:
                                  enum:
                                  - export
                                  - export,import
                                  type: string
                                rtrNodes:
                                  items:
                                    properties:
                                      nodeRef:
                                        properties:
                                          nodeId:
                                            type: integer
                                          podId:
                                            type: integer
                                        required:
                                        - nodeId
                                        - podId
                                        type: object
                                      rtrId:
                                        type: string
                                      staticRoutes:
                                        items:
                                          properties:
                                            ctrl:
                                              type: string
                                            nextHops:
                                              items:
                                                properties:
                                                  addr:
                                                    type: string
                                                  preference:
                                                    type: integer
                                                required:
                                                - addr
                                                type: object
                                              type: array
                                            prefix:
                                              type: string
                                          required:
                                          - nextHops
                                          - prefix
                                          type: object
                                        type: array
                                    required:
                                    - nodeRef
                                    type: object
                                  type: array
                              required:
                              - name
                              - podRef
                              type: object
                            type: array
                        type: object
                      type: array
                    vrf:
                      properties:
                        common-tenant:
                          type: boolean
                        name:
                          type: string
                      type: object
                  required:
                  - vrf
                  type: object
                type: array
            type: object
          status:
            properties:
              vrfs:
                items:
                  properties:
                    directlyConnectedNetworks:
                      items:
                        properties:
                          bgpPeerPolicy:
                            properties:
                              allowedSelfASCount:
                                minimum: 1
                                type: integer
                              ctrl:
                                items:
                                  enum:
                                  - AllowSelfAS
                                  - ASOverride
                                  - DisablePeerASCheck
                                  - Next-hopSelf
                                  - SendCommunity
                                  - SendExtendedCommunity
                                  - SendDomainPath
                                  - BFD
                                  - DisableConnectedCheck
                                  - RemovePrivateAS
                                  - RemoveAllPrivateAS
                                  - ReplacePrivateASWithLocalAS
                                  type: string
                                type: array
                              eBGPTTL:
                                maximum: 255
                                minimum: 1
                                type: integer
                              enabled:
                                type: boolean
                              localASN:
                                minimum: 1
                                type: integer
                              localASNConfig:
                                enum:
                                - noPrepend+replace-as+dual-as
                                - no-prepend
                                - no-options
                                - no-prepend+replace-as
                                type: string
                              peerASN:
                                minimum: 1
                                type: integer
                              prefix:
                                type: string
                              prefixPolicy:
                                type: string
                              secret:
                                description: Refers to a k8s secret which has the BGP password in data field
                                properties:
                                  name:
                                    type: string
                                  namespace:
                                    type: string
                                required:
                                - name
                                - namespace
                                type: object
                              weight:
                                maximum: 65535
                                minimum: 0
                                type: integer
                            required:
                            - peerASN
                            type: object
                          encap:
                            type: integer
                          l3OutName:
                            type: string
                          l3OutOnCommonTenant:
                            type: boolean
                          maxNodes:
                            minimum: 2
                            type: integer
                          nodes:
                            items:
                              properties:
                                nodeRef:
                                  properties:
                                    nodeId:
                                      type: integer
                                    podId:
                                      type: integer
                                  required:
                                  - nodeId
                                  - podId
                                  type: object
                                primaryAddress:
                                  type: string
                                secondaryAddresses:
                                  items:
                                    type: string
                                  type: array
                              required:
                              - nodeRef
                              - primaryAddress
                              type: object
                            type: array
                          primarySubnet:
                            type: string
                          requirePodToProvision:
                            type: boolean
                          status:
                            type: string
                          subnets:
                            items:
                              properties:
                                connectedSubnet:
                                  type: string
                                floatingAddress:
                                  type: string
                                secondaryAddress:
                                  type: string
                              required:
                              - connectedSubnet
                              type: object
                            type: array
                          sviType:
                            default: floating_svi
                            enum:
                            - floating_svi
                            - svi
                            type: string
                          useExistingL3Out:
                            type: boolean
                        required:
                        - encap
                        - l3OutName
                        - primarySubnet
                        type: object
                      type: array
                    status:
                      type: string
                    tenants:
                      items:
                        properties:
                          bgpInstances:
                            items:
                              properties:
                                action:
                                  type: string
                                maxPrefixes:
                                  type: integer
                                name:
                                  type: string
                                status:
                                  type: string
                              required:
                              - maxPrefixes
                              - name
                              type: object
                            type: array
                          commonTenant:
                            type: boolean
                          l3OutInstances:
                            items:
                              properties:
                                externalEpgs:
                                  items:
                                    properties:
                                      contracts:
                                        properties:
                                          consumer:
                                            items:
                                              type: string
                                            type: array
                                          provider:
                                            items:
                                              type: string
                                            type: array
                                        type: object
                                      name:
                                        type: string
                                      policyPrefixes:
                                        items:
                                          properties:
                                            aggregate:
                                              items:
                                                enum:
                                                - export-rtctrl
                                                - import-rtctrl
                                                - shared-rtctrl
                                                type: string
                                              maxItems: 3
                                              type: array
                                            scope:
                                              items:
                                                enum:
                                                - export-rtctrl
                                                - import-rtctrl
                                                - shared-rtctrl
                                                - shared-security
                                                - import-security
                                                type: string
                                              maxItems: 5
                                              type: array
                                            subnet:
                                              type: string
                                          required:
                                          - subnet
                                          type: object
                                        type: array
                                    required:
                                    - name
                                    - policyPrefixes
                                    type: object
                                  type: array
                                name:
                                  type: string
                                podRef:
                                  properties:
                                    podId:
                                      type: integer
                                  required:
                                  - podId
                                  type: object
                                rtCtrl:
                                  enum:
                                  - export
                                  - export,import
                                  type: string
                                rtrNodes:
                                  items:
                                    properties:
                                      nodeRef:
                                        properties:
                                          nodeId:
                                            type: integer
                                          podId:
                                            type: integer
                                        required:
                                        - nodeId
                                        - podId
                                        type: object
                                      rtrId:
                                        type: string
                                      staticRoutes:
                                        items:
                                          properties:
                                            ctrl:
                                              type: string
                                            nextHops:
                                              items:
                                                properties:
                                                  addr:
                                                    type: string
                                                  preference:
                                                    type: integer
                                                required:
                                                - addr
                                                type: object
                                              type: array
                                            prefix:
                                              type: string
                                          required:
                                          - nextHops
                                          - prefix
                                          type: object
                                        type: array
                                    required:
                                    - nodeRef
                                    type: object
                                  type: array
                                status:
                                  type: string
                              required:
                              - name
                              - podRef
                              type: object
                            type: array
                          status:
                            type: string
                        type: object
                      type: array
                    vrf:
                      properties:
                        common-tenant:
                          type: boolean
                        name:
                          type: string
                      type: object
                  required:
                  - vrf
                  type: object
                type: array
            type: object
        type: object
        x-kubernetes-validations:
        - message: Only one instance with name networkfabricl3configuration allowed
          rule: self.metadata.name == 'networkfabricl3configuration'
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: accprovisioninputs.aci.ctrl
spec:
  group: aci.ctrl
  names:
    kind: AccProvisionInput
    listKind: AccProvisionInputList
    plural: accprovisioninputs
    singular: accprovisioninput
  scope: Namespaced
  versions:
  - name: v1alpha1
    served: true
    storage: true
    subresources:
      status: {}
    schema:
      openAPIV3Schema:
        description: accprovisioninput defines the input configuration for ACI CNI
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            description: AccProvisionInputSpec defines the desired spec for accprovisioninput object
            properties:
              acc_provision_input:
                type: object
                properties:
                  operator_managed_config:
                    type: object
                    properties:
                      enable_updates:
                        type: boolean
                  aci_config:
                    type: object
                    properties:
                      sync_login:
                        type: object
                        properties:
                          certfile:
                            type: string
                          keyfile:
                            type: string
                      client_ssl:
                        type: boolean
                  net_config:
                    type: object
                    properties:
                      interface_mtu:
                        type: integer
                      service_monitor_interval:
                        type: integer
                      pbr_tracking_non_snat:
                        type: boolean
                      pod_subnet_chunk_size:
                        type: integer
                      disable_wait_for_network:
                        type: boolean
                      duration_wait_for_network:
                        type: integer
                  registry:
                    type: object
                    properties:
                      image_prefix:
                        type: string
                      image_pull_secret:
                        type: string
                      aci_containers_operator_version:
                        type: string
                      aci_containers_controller_version:
                        type: string
                      aci_containers_host_version:
                        type: string
                      acc_provision_operator_version:
                        type: string
                      aci_cni_operator_version:
                        type: string
                      cnideploy_version:
                        type: string
                      opflex_agent_version:
                        type: string
                      openvswitch_version:
                        type: string
                      gbp_version:
                        type: string
                  logging:
                    type: object
                    properties:
                      size:
                        type: integer
                      controller_log_level:
                        type: string
                      hostagent_log_level:
                        type: string
                      opflexagent_log_level:
                        type: string
                  istio_config:
                    type: object
                    properties:
                      install_profile:
                        type: string
                  multus:
                    type: object
                    properties:
                      disable:
                        type: boolean
                  drop_log_config:
                    type: object
                    properties:
                      enable:
                        type: boolean
                  nodepodif_config:
                    type: object
                    properties:
                      enable:
                        type: boolean
                  sriov_config:
                    type: object
                    properties:
                      enable:
                        type: boolean
                  kube_config:
                    type: object
                    properties:
                      ovs_memory_limit:
                        type: string
                      use_privileged_containers:
                        type: boolean
                      image_pull_policy:
                        type: string
                      reboot_opflex_with_ovs:
                        type: string
                      snat_operator:
                        type: object
                        properties:
                          port_range:
                            type: object
                            properties:
                              start:
                                type: integer
                              end:
                                type: integer
                              ports_per_node:
                                type: integer
                          contract_scope:
                            type: string
                          disable_periodic_snat_global_info_sync:
                            type: boolean
              config:
                type: string
              flavor:
                type: string
            type: object
          status:
            description: AccProvisionInputStatus defines the successful completion of AccProvisionInput
            properties:
              status:
                type: boolean
            type: object
        required:
        - spec
        type: object
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: aci-operator-config
  namespace: aci-containers-system
  labels:
    aci-containers-config-version: "dummy"
    network-plugin: aci-containers
data:
  spec:
    flavor: openshift-sdn-ovn-baremetal
    config: "\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: aci-containers-system\n  labels:\n    aci-containers-config-version: \"dummy\"\n    network-plugin: aci-containers\n    openshift.io/run-level: \"0\"\n  annotations:\n    openshift.io/node-selector: ''\n---\napiVersion: scheduling.k8s.io/v1\nkind: PriorityClass\nmetadata:\n  name: acicni-priority\nvalue: 1000000000\nglobalDefault: false\ndescription: \"This priority class is used for ACI-CNI resources\"\n---\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  name: network-attachment-definitions.k8s.cni.cncf.io\nspec:\n  group: k8s.cni.cncf.io\n  scope: Namespaced\n  names:\n    plural: network-attachment-definitions\n    singular: network-attachment-definition\n    kind: NetworkAttachmentDefinition\n    shortNames:\n    - net-attach-def\n  versions:\n  - name: v1\n    served: true\n    storage: true\n    schema:\n      openAPIV3Schema:\n        description: >-\n          'NetworkAttachmentDefinition is a CRD schema specified by the Network Plumbing\n          Working Group to express the intent for attaching pods to one or more logical or physical\n          networks. More information available at: https://github.com/k8snetworkplumbingwg/multi-net-spec'\n        type: object\n        properties:\n          apiVersion:\n            description: >-\n              'APIVersion defines the versioned schema of this represen\n              tation of an object. Servers should convert recognized schemas to the\n              latest internal value, and may reject unrecognized values. More info:\n              https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: >-\n              'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            description: 'NetworkAttachmentDefinition spec defines the desired state of a network attachment'\n            type: object\n            properties:\n              config:\n                description: 'NetworkAttachmentDefinition config is a JSON-formatted CNI configuration'\n                type: string\n---\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.12.0\n  name: nodefabricnetworkattachments.aci.fabricattachment\nspec:\n  group: aci.fabricattachment\n  names:\n    kind: NodeFabricNetworkAttachment\n    listKind: NodeFabricNetworkAttachmentList\n    plural: nodefabricnetworkattachments\n    shortNames:\n    - nfna\n    singular: nodefabricnetworkattachment\n  scope: Namespaced\n  versions:\n  - name: v1\n    schema:\n      openAPIV3Schema:\n        description: NodeFabricAttachment is the Schema for the FabricAttachments\n          API\n        properties:\n          apiVersion:\n            description: 'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: 'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            description: NodeFabricAttachmentSpec defines the desired state of network\n              attachment to the fabric\n            properties:\n              aciTopology:\n                additionalProperties:\n                  properties:\n                    fabricLink:\n                      items:\n                        type: string\n                      type: array\n                    pods:\n                      items:\n                        properties:\n                          localIface:\n                            type: string\n                          podRef:\n                            properties:\n                              name:\n                                type: string\n                              namespace:\n                                type: string\n                            required:\n                            - name\n                            - namespace\n                            type: object\n                        type: object\n                      type: array\n                  type: object\n                description: Map of iface to fabricLink\n                type: object\n              encapVlan:\n                properties:\n                  encapRef:\n                    properties:\n                      key:\n                        type: string\n                      nadVlanMap:\n                        type: string\n                    required:\n                    - key\n                    - nadVlanMap\n                    type: object\n                  mode:\n                    type: string\n                  vlanList:\n                    type: string\n                type: object\n              networkRef:\n                description: 'INSERT ADDITIONAL SPEC FIELDS - desired state of cluster\n                  Important: Run \"operator-sdk generate k8s\" to regenerate code after\n                  modifying this file Add custom validation using kubebuilder tags:\n                  https://book.kubebuilder.io/beyond_basics/generating_crd.html NetworkRef\n                  is the ns/net-att-def name, used as part of the epg ns-<NetworkName>'\n                properties:\n                  name:\n                    type: string\n                  namespace:\n                    type: string\n                required:\n                - name\n                - namespace\n                type: object\n              nodeName:\n                type: string\n              primaryCni:\n                description: 'informational: primaryCNI sriov/macvlan/ipvlan/bridge'\n                type: string\n            required:\n            - networkRef\n            type: object\n          status:\n            description: NodeFabricAttachmentStatus defines the observed state of\n              FabricAttachment\n            properties:\n              state:\n                description: 'INSERT ADDITIONAL STATUS FIELD - define observed state\n                  of cluster Important: Run \"operator-sdk generate k8s\" to regenerate\n                  code after modifying this file7 Add custom validation using kubebuilder\n                  tags: https://book.kubebuilder.io/beyond_basics/generating_crd.html'\n                type: string\n            type: object\n        type: object\n    served: true\n    storage: true\n---\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.12.0\n  name: nadvlanmaps.aci.fabricattachment\nspec:\n  group: aci.fabricattachment\n  names:\n    kind: NadVlanMap\n    listKind: NadVlanMapList\n    plural: nadvlanmaps\n    singular: nadvlanmap\n  scope: Cluster\n  versions:\n  - name: v1\n    schema:\n      openAPIV3Schema:\n        description: NadVlanMap is the Schema for FabricAttachments NAD name to vlan mapping API\n        properties:\n          apiVersion:\n            description: >-\n              'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: >-\n              'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            properties:\n              nadVlanMapping:\n                additionalProperties:\n                  items:\n                    properties:\n                      label:\n                        type: string\n                      vlans:\n                        type: string\n                    required:\n                    - vlans\n                    type: object\n                  type: array\n                description: NAD namespace/name to vlan list mapping\n                type: object\n            required:\n            - nadVlanMapping\n            type: object\n          status:\n            properties:\n              status:\n                type: string\n            type: object\n        required:\n        - spec\n        type: object\n        x-kubernetes-validations:\n        - rule: \"self.metadata.name == 'nad-vlan-map'\"\n          message: \"Only one instance with name nad-vlan-map allowed\"\n    served: true\n    storage: true\n    subresources:\n      status: {}\n---\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.12.0\n  name: networkfabricconfigurations.aci.fabricattachment\nspec:\n  group: aci.fabricattachment\n  names:\n    kind: NetworkFabricConfiguration\n    listKind: NetworkFabricConfigurationList\n    plural: networkfabricconfigurations\n    singular: networkfabricconfiguration\n  scope: Cluster\n  versions:\n  - name: v1\n    schema:\n      openAPIV3Schema:\n        description: NetworkFabricConfiguration allows additional configuration on\n          NAD based and regular vlans created by aci controller\n        properties:\n          apiVersion:\n            description: 'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: 'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            properties:\n              nadVlanRefs:\n                description: Refer to a NADVlanLabel defined in NadVlanMap CR\n                items:\n                  properties:\n                    aeps:\n                      items:\n                        type: string\n                      type: array\n                    nadVlanLabel:\n                      type: string\n                  required:\n                  - aeps\n                  - nadVlanLabel\n                  type: object\n                type: array\n              vlans:\n                description: Refer to vlan/s directly\n                items:\n                  properties:\n                    aeps:\n                      items:\n                        type: string\n                      type: array\n                    vlans:\n                      type: string\n                    epg:\n                      type: object\n                      properties:\n                        applicationProfile:\n                          type: string\n                        discoveryType:\n                          enum:\n                          - LLDP\n                          - AEP\n                          - \"\"\n                          type: string\n                        name:\n                          type: string\n                        tenant:\n                          type: string\n                        contracts:\n                          type: object\n                          properties:\n                            consumer:\n                              type: array\n                              items:\n                                type: string\n                            provider:\n                              type: array\n                              items:\n                                type: string\n                        bd:\n                          type: object\n                          properties:\n                            name:\n                              type: string\n                            common-tenant:\n                              type: boolean\n                            subnets:\n                              type: array\n                              items:\n                                type: object\n                                properties:\n                                  subnet:\n                                    type: string\n                                  scope:\n                                    type: array\n                                    items:\n                                      type: string\n                                      enum:\n                                        - \"shared-between-vrfs\"\n                                        - \"advertise-externally\"\n                                  control:\n                                    type: array\n                                    items:\n                                      type: string\n                                      enum:\n                                        - \"nd-ra-prefix\"\n                                        - \"querier-ip\"\n                                        - \"no-default-svi-gateway\"\n                            vrf:\n                              type: object\n                              properties:\n                                name:\n                                  type: string\n                                common-tenant:\n                                  type: boolean\n                  required:\n                  - vlans\n                  type: object\n                type: array\n            type: object\n          status:\n            description: NetworkFabricConfigurationStatus defines the observed state\n              of NetworkFabricConfiguration\n            properties:\n              state:\n                type: string\n            type: object\n        type: object\n        x-kubernetes-validations:\n        - message: Only one instance with name networkfabricconfiguration allowed\n          rule: self.metadata.name == 'networkfabricconfiguration'\n    served: true\n    storage: true\n    subresources:\n      status: {}\n---\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.12.0\n  name: fabricvlanpools.aci.fabricattachment\nspec:\n  group: aci.fabricattachment\n  names:\n    kind: FabricVlanPool\n    listKind: FabricVlanPoolList\n    plural: fabricvlanpools\n    singular: fabricvlanpool\n  scope: Namespaced\n  versions:\n  - name: v1\n    schema:\n      openAPIV3Schema:\n        description: FabricVlanPool is the Schema for the fabricattachments vlanpool API\n        properties:\n          apiVersion:\n            description: >-\n              'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: >-\n              'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            description: FabricVlanPoolSpec defines the list of vlans in the fabric vlan pool\n            properties:\n              vlans:\n                items:\n                  type: string\n                type: array\n            type: object\n          status:\n            description: FabricVlanPoolStatus defines the observed state of FabricVlanPool\n            properties:\n              error:\n                type: string\n              state:\n                description: >-\n                  'INSERT ADDITIONAL STATUS FIELD - define observed state\n                  of cluster Important: Run \"operator-sdk generate k8s\" to regenerate\n                  code after modifying this file7 Add custom validation using kubebuilder\n                  tags: https://book.kubebuilder.io/beyond_basics/generating_crd.html'\n                type: string\n            type: object\n        type: object\n    served: true\n    storage: true\n    subresources:\n      status: {}\n---\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.12.0\n  name: nodefabricnetworkl3peers.aci.fabricattachment\nspec:\n  group: aci.fabricattachment\n  names:\n    kind: NodeFabricNetworkL3Peer\n    listKind: NodeFabricNetworkL3PeerList\n    plural: nodefabricnetworkl3peers\n    singular: nodefabricnetworkl3peer\n  scope: Cluster\n  versions:\n  - name: v1\n    schema:\n      openAPIV3Schema:\n        description: NodeFabricNetworkL3Peers displays the status of L3 peers on svis\n          created by aci controller\n        properties:\n          apiVersion:\n            description: 'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: 'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          status:\n            properties:\n              nadRefs:\n                items:\n                  properties:\n                    nad:\n                      properties:\n                        name:\n                          type: string\n                        namespace:\n                          type: string\n                      required:\n                      - name\n                      - namespace\n                      type: object\n                    nodes:\n                      items:\n                        properties:\n                          fabricL3Peers:\n                            items:\n                              properties:\n                                encap:\n                                  type: integer\n                                fabricNodeIds:\n                                  items:\n                                    type: integer\n                                  type: array\n                                podId:\n                                  type: integer\n                              required:\n                              - encap\n                              - fabricNodeIds\n                              - podId\n                              type: object\n                            type: array\n                          nodeName:\n                            type: string\n                        required:\n                        - nodeName\n                        type: object\n                      type: array\n                  required:\n                  - nad\n                  type: object\n                type: array\n              peeringInfo:\n                items:\n                  properties:\n                    asn:\n                      type: integer\n                    encap:\n                      type: integer\n                    fabricNodes:\n                      items:\n                        properties:\n                          nodeRef:\n                            properties:\n                              nodeId:\n                                type: integer\n                              podId:\n                                type: integer\n                            required:\n                            - nodeId\n                            - podId\n                            type: object\n                          primaryAddress:\n                            type: string\n                          secondaryAddresses:\n                            items:\n                              type: string\n                            type: array\n                        required:\n                        - nodeRef\n                        - primaryAddress\n                        type: object\n                      type: array\n                    secret:\n                      properties:\n                        name:\n                          type: string\n                        namespace:\n                          type: string\n                      required:\n                      - name\n                      - namespace\n                      type: object\n                  required:\n                  - asn\n                  - encap\n                  type: object\n                type: array\n            type: object\n        type: object\n        x-kubernetes-validations:\n        - rule: \"self.metadata.name == 'nodefabricnetworkl3peer'\"\n          message: \"Only one instance with name nodefabricnetworkl3peer\"\n    served: true\n    storage: true\n---\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.12.0\n  name: networkfabricl3configurations.aci.fabricattachment\nspec:\n  group: aci.fabricattachment\n  names:\n    kind: NetworkFabricL3Configuration\n    listKind: NetworkFabricL3ConfigurationList\n    plural: networkfabricl3configurations\n    singular: networkfabricl3configuration\n  scope: Cluster\n  versions:\n  - name: v1\n    schema:\n      openAPIV3Schema:\n        description: NetworkFabricL3Configuration allows additional configuration\n          on NAD based and regular vlans created by aci controller\n        properties:\n          apiVersion:\n            description: 'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: 'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            properties:\n              vrfs:\n                items:\n                  properties:\n                    directlyConnectedNetworks:\n                      items:\n                        properties:\n                          bgpPeerPolicy:\n                            properties:\n                              allowedSelfASCount:\n                                minimum: 1\n                                type: integer\n                              ctrl:\n                                items:\n                                  enum:\n                                  - AllowSelfAS\n                                  - ASOverride\n                                  - DisablePeerASCheck\n                                  - Next-hopSelf\n                                  - SendCommunity\n                                  - SendExtendedCommunity\n                                  - SendDomainPath\n                                  - BFD\n                                  - DisableConnectedCheck\n                                  - RemovePrivateAS\n                                  - RemoveAllPrivateAS\n                                  - ReplacePrivateASWithLocalAS\n                                  type: string\n                                type: array\n                              eBGPTTL:\n                                maximum: 255\n                                minimum: 1\n                                type: integer\n                              enabled:\n                                type: boolean\n                              localASN:\n                                minimum: 1\n                                type: integer\n                              localASNConfig:\n                                enum:\n                                - noPrepend+replace-as+dual-as\n                                - no-prepend\n                                - no-options\n                                - no-prepend+replace-as\n                                type: string\n                              peerASN:\n                                minimum: 1\n                                type: integer\n                              prefix:\n                                type: string\n                              prefixPolicy:\n                                type: string\n                              secret:\n                                description: Refers to a k8s secret which has the\n                                  BGP password in data field\n                                properties:\n                                  name:\n                                    type: string\n                                  namespace:\n                                    type: string\n                                required:\n                                - name\n                                - namespace\n                                type: object\n                              weight:\n                                maximum: 65535\n                                minimum: 0\n                                type: integer\n                            required:\n                            - peerASN\n                            type: object\n                          encap:\n                            type: integer\n                          l3OutName:\n                            type: string\n                          l3OutOnCommonTenant:\n                            type: boolean\n                          maxNodes:\n                            minimum: 2\n                            type: integer\n                          nodes:\n                            items:\n                              properties:\n                                nodeRef:\n                                  properties:\n                                    nodeId:\n                                      type: integer\n                                    podId:\n                                      type: integer\n                                  required:\n                                  - nodeId\n                                  - podId\n                                  type: object\n                                primaryAddress:\n                                  type: string\n                                secondaryAddresses:\n                                  items:\n                                    type: string\n                                  type: array\n                              required:\n                              - nodeRef\n                              - primaryAddress\n                              type: object\n                            type: array\n                          primarySubnet:\n                            type: string\n                          requirePodToProvision:\n                            type: boolean\n                          subnets:\n                            items:\n                              properties:\n                                connectedSubnet:\n                                  type: string\n                                floatingAddress:\n                                  type: string\n                                secondaryAddress:\n                                  type: string\n                              required:\n                              - connectedSubnet\n                              type: object\n                            type: array\n                          sviType:\n                            default: floating_svi\n                            enum:\n                            - floating_svi\n                            - svi\n                            type: string\n                          useExistingL3Out:\n                            type: boolean\n                        required:\n                        - encap\n                        - l3OutName\n                        - primarySubnet\n                        type: object\n                      type: array\n                    tenants:\n                      items:\n                        properties:\n                          bgpInstances:\n                            items:\n                              properties:\n                                action:\n                                  type: string\n                                maxPrefixes:\n                                  type: integer\n                                name:\n                                  type: string\n                              required:\n                              - maxPrefixes\n                              - name\n                              type: object\n                            type: array\n                          commonTenant:\n                            type: boolean\n                          l3OutInstances:\n                            items:\n                              properties:\n                                externalEpgs:\n                                  items:\n                                    properties:\n                                      contracts:\n                                        properties:\n                                          consumer:\n                                            items:\n                                              type: string\n                                            type: array\n                                          provider:\n                                            items:\n                                              type: string\n                                            type: array\n                                        type: object\n                                      name:\n                                        type: string\n                                      policyPrefixes:\n                                        items:\n                                          properties:\n                                            aggregate:\n                                              items:\n                                                enum:\n                                                - export-rtctrl\n                                                - import-rtctrl\n                                                - shared-rtctrl\n                                                type: string\n                                              maxItems: 3\n                                              type: array\n                                            scope:\n                                              items:\n                                                enum:\n                                                - export-rtctrl\n                                                - import-rtctrl\n                                                - shared-rtctrl\n                                                - shared-security\n                                                - import-security\n                                                type: string\n                                              maxItems: 5\n                                              type: array\n                                            subnet:\n                                              type: string\n                                          required:\n                                          - subnet\n                                          type: object\n                                        type: array\n                                    required:\n                                    - name\n                                    - policyPrefixes\n                                    type: object\n                                  type: array\n                                name:\n                                  type: string\n                                podRef:\n                                  properties:\n                                    podId:\n                                      type: integer\n                                  required:\n                                  - podId\n                                  type: object\n                                rtCtrl:\n                                  enum:\n                                  - export\n                                  - export,import\n                                  type: string\n                                rtrNodes:\n                                  items:\n                                    properties:\n                                      nodeRef:\n                                        properties:\n                                          nodeId:\n                                            type: integer\n                                          podId:\n                                            type: integer\n                                        required:\n                                        - nodeId\n                                        - podId\n                                        type: object\n                                      rtrId:\n                                        type: string\n                                      staticRoutes:\n                                        items:\n                                          properties:\n                                            ctrl:\n                                              type: string\n                                            nextHops:\n                                              items:\n                                                properties:\n                                                  addr:\n                                                    type: string\n                                                  preference:\n                                                    type: integer\n                                                required:\n                                                - addr\n                                                type: object\n                                              type: array\n                                            prefix:\n                                              type: string\n                                          required:\n                                          - nextHops\n                                          - prefix\n                                          type: object\n                                        type: array\n                                    required:\n                                    - nodeRef\n                                    type: object\n                                  type: array\n                              required:\n                              - name\n                              - podRef\n                              type: object\n                            type: array\n                        type: object\n                      type: array\n                    vrf:\n                      properties:\n                        common-tenant:\n                          type: boolean\n                        name:\n                          type: string\n                      type: object\n                  required:\n                  - vrf\n                  type: object\n                type: array\n            type: object\n          status:\n            properties:\n              vrfs:\n                items:\n                  properties:\n                    directlyConnectedNetworks:\n                      items:\n                        properties:\n                          bgpPeerPolicy:\n                            properties:\n                              allowedSelfASCount:\n                                minimum: 1\n                                type: integer\n                              ctrl:\n                                items:\n                                  enum:\n                                  - AllowSelfAS\n                                  - ASOverride\n                                  - DisablePeerASCheck\n                                  - Next-hopSelf\n                                  - SendCommunity\n                                  - SendExtendedCommunity\n                                  - SendDomainPath\n                                  - BFD\n                                  - DisableConnectedCheck\n                                  - RemovePrivateAS\n                                  - RemoveAllPrivateAS\n                                  - ReplacePrivateASWithLocalAS\n                                  type: string\n                                type: array\n                              eBGPTTL:\n                                maximum: 255\n                                minimum: 1\n                                type: integer\n                              enabled:\n                                type: boolean\n                              localASN:\n                                minimum: 1\n                                type: integer\n                              localASNConfig:\n                                enum:\n                                - noPrepend+replace-as+dual-as\n                                - no-prepend\n                                - no-options\n                                - no-prepend+replace-as\n                                type: string\n                              peerASN:\n                                minimum: 1\n                                type: integer\n                              prefix:\n                                type: string\n                              prefixPolicy:\n                                type: string\n                              secret:\n                                description: Refers to a k8s secret which has the\n                                  BGP password in data field\n                                properties:\n                                  name:\n                                    type: string\n                                  namespace:\n                                    type: string\n                                required:\n                                - name\n                                - namespace\n                                type: object\n                              weight:\n                                maximum: 65535\n                                minimum: 0\n                                type: integer\n                            required:\n                            - peerASN\n                            type: object\n                          encap:\n                            type: integer\n                          l3OutName:\n                            type: string\n                          l3OutOnCommonTenant:\n                            type: boolean\n                          maxNodes:\n                            minimum: 2\n                            type: integer\n                          nodes:\n                            items:\n                              properties:\n                                nodeRef:\n                                  properties:\n                                    nodeId:\n                                      type: integer\n                                    podId:\n                                      type: integer\n                                  required:\n                                  - nodeId\n                                  - podId\n                                  type: object\n                                primaryAddress:\n                                  type: string\n                                secondaryAddresses:\n                                  items:\n                                    type: string\n                                  type: array\n                              required:\n                              - nodeRef\n                              - primaryAddress\n                              type: object\n                            type: array\n                          primarySubnet:\n                            type: string\n                          requirePodToProvision:\n                            type: boolean\n                          status:\n                            type: string\n                          subnets:\n                            items:\n                              properties:\n                                connectedSubnet:\n                                  type: string\n                                floatingAddress:\n                                  type: string\n                                secondaryAddress:\n                                  type: string\n                              required:\n                              - connectedSubnet\n                              type: object\n                            type: array\n                          sviType:\n                            default: floating_svi\n                            enum:\n                            - floating_svi\n                            - svi\n                            type: string\n                          useExistingL3Out:\n                            type: boolean\n                        required:\n                        - encap\n                        - l3OutName\n                        - primarySubnet\n                        type: object\n                      type: array\n                    status:\n                      type: string\n                    tenants:\n                      items:\n                        properties:\n                          bgpInstances:\n                            items:\n                              properties:\n                                action:\n                                  type: string\n                                maxPrefixes:\n                                  type: integer\n                                name:\n                                  type: string\n                                status:\n                                  type: string\n                              required:\n                              - maxPrefixes\n                              - name\n                              type: object\n                            type: array\n                          commonTenant:\n                            type: boolean\n                          l3OutInstances:\n                            items:\n                              properties:\n                                externalEpgs:\n                                  items:\n                                    properties:\n                                      contracts:\n                                        properties:\n                                          consumer:\n                                            items:\n                                              type: string\n                                            type: array\n                                          provider:\n                                            items:\n                                              type: string\n                                            type: array\n                                        type: object\n                                      name:\n                                        type: string\n                                      policyPrefixes:\n                                        items:\n                                          properties:\n                                            aggregate:\n                                              items:\n                                                enum:\n                                                - export-rtctrl\n                                                - import-rtctrl\n                                                - shared-rtctrl\n                                                type: string\n                                              maxItems: 3\n                                              type: array\n                                            scope:\n                                              items:\n                                                enum:\n                                                - export-rtctrl\n                                                - import-rtctrl\n                                                - shared-rtctrl\n                                                - shared-security\n                                                - import-security\n                                                type: string\n                                              maxItems: 5\n                                              type: array\n                                            subnet:\n                                              type: string\n                                          required:\n                                          - subnet\n                                          type: object\n                                        type: array\n                                    required:\n                                    - name\n                                    - policyPrefixes\n                                    type: object\n                                  type: array\n                                name:\n                                  type: string\n                                podRef:\n                                  properties:\n                                    podId:\n                                      type: integer\n                                  required:\n                                  - podId\n                                  type: object\n                                rtCtrl:\n                                  enum:\n                                  - export\n                                  - export,import\n                                  type: string\n                                rtrNodes:\n                                  items:\n                                    properties:\n                                      nodeRef:\n                                        properties:\n                                          nodeId:\n                                            type: integer\n                                          podId:\n                                            type: integer\n                                        required:\n                                        - nodeId\n                                        - podId\n                                        type: object\n                                      rtrId:\n                                        type: string\n                                      staticRoutes:\n                                        items:\n                                          properties:\n                                            ctrl:\n                                              type: string\n                                            nextHops:\n                                              items:\n                                                properties:\n                                                  addr:\n                                                    type: string\n                                                  preference:\n                                                    type: integer\n                                                required:\n                                                - addr\n                                                type: object\n                                              type: array\n                                            prefix:\n                                              type: string\n                                          required:\n                                          - nextHops\n                                          - prefix\n                                          type: object\n                                        type: array\n                                    required:\n                                    - nodeRef\n                                    type: object\n                                  type: array\n                                status:\n                                  type: string\n                              required:\n                              - name\n                              - podRef\n                              type: object\n                            type: array\n                          status:\n                            type: string\n                        type: object\n                      type: array\n                    vrf:\n                      properties:\n                        common-tenant:\n                          type: boolean\n                        name:\n                          type: string\n                      type: object\n                  required:\n                  - vrf\n                  type: object\n                type: array\n            type: object\n        type: object\n        x-kubernetes-validations:\n        - message: Only one instance with name networkfabricl3configuration allowed\n          rule: self.metadata.name == 'networkfabricl3configuration'\n    served: true\n    storage: true\n    subresources:\n      status: {}\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: aci-containers-config\n  namespace: aci-containers-system\n  labels:\n    aci-containers-config-version: \"dummy\"\n    network-plugin: aci-containers\ndata:\n  controller-config: |-\n    {\n        \"flavor\": \"openshift-sdn-ovn-baremetal\",\n        \"log-level\": \"info\",\n        \"apic-hosts\": [\n            \"10.30.120.100\"\n        ],\n        \"aci-additional-aep\": \"kube-aep-2\",\n        \"chained-mode\": true,\n        \"primary-cni-path\": \"/mnt/cni-conf/cni/net.d/10-ovn-kubernetes.conf\",\n        \"aci-phys-dom\": \"kube-physdom\",\n        \"apic-username\": \"kube\",\n        \"apic-private-key-path\": \"/usr/local/etc/aci-cert/user.key\",\n        \"aci-prefix\": \"kube\",\n        \"aci-vmm-type\": \"Kubernetes\",\n        \"aci-vmm-domain\": \"kube\",\n        \"aci-vmm-controller\": \"kube\",\n        \"aci-use-global-scope-vlan\": false,\n        \"aci-policy-tenant\": \"kube\",\n        \"aci-nodebd-dn\": \"uni/tn-kube/BD-netop-nodes\",\n        \"aci-service-phys-dom\": \"kube-physdom\",\n        \"aci-service-encap\": \"vlan-None\",\n        \"aci-pbr-tracking-non-snat\": false,\n        \"aci-vrf-tenant\": \"common\",\n        \"aci-vrf-dn\": \"uni/tn-common/ctx-kube\",\n        \"aci-vrf\": \"kube\",\n        \"aci-l3out\": \"l3out\",\n        \"aci-ext-networks\": [\n            \"default\"\n        ]\n    }\n  host-agent-config: |-\n    {\n        \"flavor\": \"openshift-sdn-ovn-baremetal\",\n        \"app-profile\": \"netop-kube\",\n        \"chained-mode\": true,\n        \"enable-chained-secondary\": true,\n        \"primary-cni-path\": \"/mnt/cni-conf/cni/net.d/10-ovn-kubernetes.conf\",\n        \"log-level\": \"info\",\n        \"aci-vmm-type\": \"Kubernetes\",\n        \"aci-vmm-domain\": \"kube\",\n        \"aci-vmm-controller\": \"kube\",\n        \"aci-vrf\": \"kube\",\n        \"aci-vrf-tenant\": \"common\",\n        \"aci-prefix\": \"kube\",\n        \"kubeapi-vlan\": 4001,\n        \"node-subnet\": \"10.1.0.1/16\",\n        \"aci-use-global-scope-vlan\": false,\n        \"enable-drop-log\": true,\n        \"enable-nodepodif\": false\n    }\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: aci-user-cert\n  namespace: aci-containers-system\n  labels:\n    aci-containers-config-version: \"dummy\"\ndata:\n  user.key: ZHVtbXkK\n  user.crt: ZHVtbXkK\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: aci-containers-controller\n  namespace: aci-containers-system\n  labels:\n    aci-containers-config-version: \"dummy\"\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: aci-containers-host-agent\n  namespace: aci-containers-system\n  labels:\n    aci-containers-config-version: \"dummy\"\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  labels:\n    aci-containers-config-version: \"dummy\"\n    network-plugin: aci-containers\n  name: aci-containers-controller\nrules:\n- apiGroups:\n  - \"\"\n  resources:\n  - nodes\n  - namespaces\n  - pods\n  - endpoints\n  - services\n  - events\n  - replicationcontrollers\n  - serviceaccounts\n  verbs:\n  - list\n  - watch\n  - get\n  - patch\n  - create\n  - update\n  - delete\n- apiGroups:\n  - \"\"\n  resources:\n  - configmaps\n  verbs:\n  - list\n  - watch\n  - get\n  - create\n  - update\n  - delete\n- apiGroups:\n  - \"apiextensions.k8s.io\"\n  resources:\n  - customresourcedefinitions\n  verbs:\n  - '*'\n- apiGroups:\n  - \"rbac.authorization.k8s.io\"\n  resources:\n  - clusterroles\n  - clusterrolebindings\n  verbs:\n  - '*'\n- apiGroups:\n  - \"networking.k8s.io\"\n  resources:\n  - networkpolicies\n  verbs:\n  - list\n  - watch\n  - get\n- apiGroups:\n  - \"apps\"\n  resources:\n  - deployments\n  - replicasets\n  - daemonsets\n  - statefulsets\n  verbs:\n  - '*'\n- apiGroups:\n  - \"\"\n  resources:\n  - nodes\n  - services/status\n  verbs:\n  - update\n- apiGroups:\n  - \"monitoring.coreos.com\"\n  resources:\n  - servicemonitors\n  verbs:\n  - get\n  - create\n- apiGroups:\n  - \"aci.snat\"\n  resources:\n  - snatpolicies/finalizers\n  - snatpolicies/status\n  - nodeinfos\n  verbs:\n  - update\n  - create\n  - list\n  - watch\n  - get\n  - delete\n- apiGroups:\n  - \"aci.snat\"\n  resources:\n  - snatglobalinfos\n  - snatpolicies\n  - nodeinfos\n  - rdconfigs\n  verbs:\n  - list\n  - watch\n  - get\n  - create\n  - update\n  - delete\n- apiGroups:\n  - \"aci.qos\"\n  resources:\n  - qospolicies\n  verbs:\n  - list\n  - watch\n  - get\n  - create\n  - update\n  - delete\n  - patch\n- apiGroups:\n  - \"aci.netflow\"\n  resources:\n  - netflowpolicies\n  verbs:\n  - list\n  - watch\n  - get\n  - update\n- apiGroups:\n  - \"aci.erspan\"\n  resources:\n  - erspanpolicies\n  verbs:\n  - list\n  - watch\n  - get\n  - update\n- apiGroups:\n  - \"aci.aw\"\n  resources:\n  - nodepodifs\n  verbs:\n  - '*'\n- apiGroups:\n  - apps.openshift.io\n  resources:\n  - deploymentconfigs\n  verbs:\n  - list\n  - watch\n  - get\n- apiGroups:\n  - discovery.k8s.io\n  resources:\n  - endpointslices\n  verbs:\n  - get\n  - list\n  - watch\n- apiGroups:\n  - \"aci.netpol\"\n  resources:\n  - networkpolicies\n  verbs:\n  - get\n  - list\n  - watch\n  - create\n  - update\n  - delete\n- apiGroups:\n  - \"aci.dnsnetpol\"\n  resources:\n  - dnsnetworkpolicies\n  verbs:\n  - get\n  - list\n  - watch\n  - create\n  - update\n  - delete\n- apiGroups:\n  - aci.fabricattachment\n  resources:\n  - nodefabricnetworkattachments\n  - nadvlanmaps\n  - networkfabricconfigurations\n  - fabricvlanpools\n  - networkfabricl3configurations\n  verbs:\n  - get\n  - list\n  - watch\n- apiGroups:\n  - aci.fabricattachment\n  resources:\n  - nodefabricnetworkl3peers\n  verbs:\n  - '*'\n- apiGroups:\n  - aci.fabricattachment\n  resources:\n  - nadvlanmaps/status\n  - fabricvlanpools/status\n  - networkfabricl3configurations/status\n  verbs:\n  - get\n  - list\n  - watch\n  - update\n  - patch\n- apiGroups:\n  - \"aci.hpp\"\n  resources:\n  - hostprotpols\n  - hostprotremoteipcontainers\n  verbs:\n  - list\n  - watch\n  - get\n  - create\n  - update\n  - delete\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  labels:\n    aci-containers-config-version: \"dummy\"\n    network-plugin: aci-containers\n  name: aci-containers-host-agent\nrules:\n- apiGroups:\n  - \"\"\n  resources:\n  - nodes\n  - namespaces\n  - pods\n  - endpoints\n  - services\n  - replicationcontrollers\n  verbs:\n  - list\n  - watch\n  - get\n  - update\n- apiGroups:\n  - \"\"\n  resources:\n  - events\n  verbs:\n  - create\n  - patch\n- apiGroups:\n  - \"apiextensions.k8s.io\"\n  resources:\n  - customresourcedefinitions\n  verbs:\n  - list\n  - watch\n  - get\n- apiGroups:\n  - \"networking.k8s.io\"\n  resources:\n  - networkpolicies\n  verbs:\n  - list\n  - watch\n  - get\n- apiGroups:\n  - \"apps\"\n  resources:\n  - deployments\n  - replicasets\n  verbs:\n  - list\n  - watch\n  - get\n- apiGroups:\n  - \"aci.snat\"\n  resources:\n  - snatpolicies\n  - snatglobalinfos\n  - rdconfigs\n  verbs:\n  - list\n  - watch\n  - get\n- apiGroups:\n  - \"aci.qos\"\n  resources:\n  - qospolicies\n  verbs:\n  - list\n  - watch\n  - get\n  - create\n  - update\n  - delete\n  - patch\n- apiGroups:\n  - \"aci.droplog\"\n  resources:\n  - enabledroplogs\n  - prunedroplogs\n  verbs:\n  - list\n  - watch\n  - get\n- apiGroups:\n  - \"aci.snat\"\n  resources:\n  - nodeinfos\n  - snatlocalinfos\n  verbs:\n  - create\n  - update\n  - list\n  - watch\n  - get\n  - delete\n- apiGroups:\n  - \"config.openshift.io\"\n  resources:\n  - infrastructures\n  verbs:\n  - get\n- apiGroups:\n  - discovery.k8s.io\n  resources:\n  - endpointslices\n  verbs:\n  - get\n  - list\n  - watch\n- apiGroups:\n  - \"aci.netpol\"\n  resources:\n  - networkpolicies\n  verbs:\n  - get\n  - list\n  - watch\n- apiGroups:\n  - \"aci.aw\"\n  resources:\n  - nodepodifs\n  verbs:\n  - \"*\"\n- apiGroups: [\"k8s.cni.cncf.io\"]\n  resources:\n  - '*'\n  verbs:\n  - '*'\n- apiGroups:\n  - aci.fabricattachment\n  resources:\n  - nodefabricnetworkattachments\n  - nodefabricnetworkattachments/status\n  verbs:\n  - \"*\"\n- apiGroups:\n  - \"\"\n  resources:\n  - configmaps\n  verbs:\n  - list\n  - watch\n  - get\n  - update\n- apiGroups:\n  - aci.fabricattachment\n  resources:\n  - nadvlanmaps\n  - fabricvlanpools\n  verbs:\n  - get\n  - list\n  - watch\n- apiGroups:\n  - \"aci.hpp\"\n  resources:\n  - hostprotpols\n  - hostprotremoteipcontainers\n  verbs:\n  - list\n  - watch\n  - get\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: aci-containers-controller\n  labels:\n    aci-containers-config-version: \"dummy\"\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: aci-containers-controller\nsubjects:\n- kind: ServiceAccount\n  name: aci-containers-controller\n  namespace: aci-containers-system\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: aci-containers-host-agent\n  labels:\n    aci-containers-config-version: \"dummy\"\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: aci-containers-host-agent\nsubjects:\n- kind: ServiceAccount\n  name: aci-containers-host-agent\n  namespace: aci-containers-system\n---\napiVersion: aci.fabricattachment/v1\nkind: FabricVlanPool\nmetadata:\n  name: default\n  namespace: aci-containers-system\nspec:\n  vlans:\n  - '4002'\n  - 4003, 4009\n  - 4004-4007\n---\napiVersion: apps/v1\nkind: DaemonSet\nmetadata:\n  name: aci-containers-host\n  namespace: aci-containers-system\n  labels:\n    aci-containers-config-version: \"dummy\"\n    network-plugin: aci-containers\nspec:\n  updateStrategy:\n    type: RollingUpdate\n  selector:\n    matchLabels:\n      name: aci-containers-host\n      network-plugin: aci-containers\n  template:\n    metadata:\n      labels:\n        name: aci-containers-host\n        network-plugin: aci-containers\n      annotations:\n    spec:\n      hostNetwork: true\n      hostPID: true\n      hostIPC: true\n      serviceAccountName: aci-containers-host-agent\n      tolerations:\n      - operator: Exists\n      priorityClassName: acicni-priority\n      containers:\n      - name: aci-containers-host\n        image: noiro/aci-containers-host:6.1.2.1.81c2369\n        imagePullPolicy: Always\n        securityContext:\n          privileged: true\n          capabilities:\n            add:\n            - SYS_ADMIN\n            - NET_ADMIN\n            - SYS_PTRACE\n            - NET_RAW\n        env:\n        - name: GOTRACEBACK\n          value: \"2\"\n        - name: KUBERNETES_NODE_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: spec.nodeName\n        - name: TENANT\n          value: \"kube\"\n        - name: NODE_EPG\n          value: \"netop-kube|netop-nodes\"\n        - name: MULTUS\n          value: 'True'\n        - name: DURATION_WAIT_FOR_NETWORK\n          value: \"210\"\n        - name: CHAINED_MODE\n          value: \"true\"\n        - name: PRIMARY_CNI_PATH\n          value: \"/mnt/cni-conf/cni/net.d/10-ovn-kubernetes.conf\"\n        volumeMounts:\n        - name: cni-bin\n          mountPath: /mnt/cni-bin\n        - name: cni-conf\n          mountPath: /mnt/cni-conf\n        - name: hostvar\n          mountPath: /usr/local/var\n        - name: hostrun\n          mountPath: /run\n        - name: hostrun\n          mountPath: /usr/local/run\n        - name: host-config-volume\n          mountPath: /usr/local/etc/aci-containers/\n        - name: varlogpods\n          mountPath: /var/log/pods\n          readOnly: true\n        - name: varlogcontainers\n          mountPath: /var/log/containers\n          readOnly: true\n        - name: varlibdocker\n          mountPath: /var/lib/docker\n          readOnly: true\n        - mountPath: /run/netns\n          name: host-run-netns\n          readOnly: true\n          mountPropagation: HostToContainer\n        - name: multus-cni-conf\n          mountPath: /mnt/multus-cni-conf\n        livenessProbe:\n          failureThreshold: 10\n          httpGet:\n            path: /status\n            port: 8090\n            scheme: HTTP\n          initialDelaySeconds: 120\n          periodSeconds: 60\n          successThreshold: 1\n          timeoutSeconds: 30\n      restartPolicy: Always\n      volumes:\n      - name: cni-bin\n        hostPath:\n          path: /var/lib\n      - name: cni-conf\n        hostPath:\n          path: /run/multus\n      - name: hostvar\n        hostPath:\n          path: /var\n      - name: hostrun\n        hostPath:\n          path: /run\n      - name: host-config-volume\n        configMap:\n          name: aci-containers-config\n          items:\n          - key: host-agent-config\n            path: host-agent.conf\n      - name: varlogpods\n        hostPath:\n          path: /var/log/pods\n      - name: varlogcontainers\n        hostPath:\n          path: /var/log/containers\n      - name: varlibdocker\n        hostPath:\n          path: /var/lib/docker\n      - name: host-run-netns\n        hostPath:\n          path: /run/netns\n      - name: multus-cni-conf\n        hostPath:\n          path: /var/run/multus/\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: aci-containers-controller\n  namespace: aci-containers-system\n  labels:\n    aci-containers-config-version: \"dummy\"\n    network-plugin: aci-containers\n    name: aci-containers-controller\nspec:\n  replicas: 1\n  strategy:\n    type: Recreate\n  selector:\n    matchLabels:\n      name: aci-containers-controller\n      network-plugin: aci-containers\n  template:\n    metadata:\n      name: aci-containers-controller\n      namespace: aci-containers-system\n      labels:\n        name: aci-containers-controller\n        network-plugin: aci-containers\n    spec:\n      hostNetwork: true\n      serviceAccountName: aci-containers-controller\n      tolerations:\n      - effect: NoExecute\n        key: node.kubernetes.io/unreachable\n        operator: Exists\n        tolerationSeconds: 60\n      - effect: NoExecute\n        key: node.kubernetes.io/not-ready\n        operator: Exists\n        tolerationSeconds: 60\n      - effect: NoSchedule\n        key: node.kubernetes.io/not-ready\n        operator: Exists\n      - effect: NoSchedule\n        key: node-role.kubernetes.io/master\n        operator: Exists\n      priorityClassName: acicni-priority\n      containers:\n      - name: aci-containers-controller\n        image: noiro/aci-containers-controller:6.1.2.1.81c2369\n        imagePullPolicy: Always\n        env:\n        - name: SYSTEM_NAMESPACE\n          value: \"aci-containers-system\"\n        volumeMounts:\n        - name: controller-config-volume\n          mountPath: /usr/local/etc/aci-containers/\n        - name: varlogpods\n          mountPath: /var/log/pods\n          readOnly: true\n        - name: varlogcontainers\n          mountPath: /var/log/containers\n          readOnly: true\n        - name: varlibdocker\n          mountPath: /var/lib/docker\n          readOnly: true\n        - name: aci-user-cert-volume\n          mountPath: /usr/local/etc/aci-cert/\n        livenessProbe:\n          failureThreshold: 10\n          httpGet:\n            path: /status\n            port: 8091\n            scheme: HTTP\n          initialDelaySeconds: 120\n          periodSeconds: 60\n          successThreshold: 1\n          timeoutSeconds: 30\n      volumes:\n      - name: aci-user-cert-volume\n        secret:\n          secretName: aci-user-cert\n      - name: controller-config-volume\n        configMap:\n          name: aci-containers-config\n          items:\n          - key: controller-config\n            path: controller.conf\n      - name: varlogpods\n        hostPath:\n          path: /var/log/pods\n      - name: varlogcontainers\n        hostPath:\n          path: /var/log/containers\n      - name: varlibdocker\n        hostPath:\n          path: /var/lib/docker\n---\napiVersion: v1\nkind: LimitRange\nmetadata:\n  name: memory-limit-range\n  namespace: aci-containers-system\nspec:\n  limits:\n  - default:\n      memory: 3Gi\n    defaultRequest:\n      memory: 128Mi\n    type: Container\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: aci-containers-webhook\n  namespace: aci-containers-system\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: aci-containers-webhook\nrules:\n- apiGroups:\n  - admissionregistration.k8s.io\n  resources:\n  - mutatingwebhookconfigurations\n  - validatingwebhookconfigurations\n  verbs:\n  - '*'\n- apiGroups:\n  - k8s.cni.cncf.io\n  resources:\n  - network-attachment-definitions\n  verbs:\n  - '*'\n- apiGroups:\n  - \"\"\n  resources:\n  - secrets\n  verbs:\n  - list\n  - get\n  - create\n  - update\n  - watch\n- apiGroups:\n  - \"\"\n  resources:\n  - configmaps\n  verbs:\n  - '*'\n- apiGroups:\n  - security.openshift.io\n  resourceNames:\n  - privileged\n  resources:\n  - securitycontextconstraints\n  verbs:\n  - use\n- apiGroups:\n  - aci.fabricattachment\n  resources:\n  - nodefabricnetworkl3peers\n  - networkfabricl3configurations\n  - networkfabricconfigurations\n  verbs:\n  - get\n  - list\n  - watch\n- apiGroups:\n  - \"\"\n  resources:\n  - pods\n  verbs:\n  - get\n  - list\n  - watch\n  - update\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: aci-containers-webhook\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: aci-containers-webhook\nsubjects:\n- kind: ServiceAccount\n  name: aci-containers-webhook\n  namespace: aci-containers-system\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app: aci-containers-webhook\n  name: aci-containers-webhook\n  namespace: aci-containers-system\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: aci-containers-webhook\n  template:\n    metadata:\n      labels:\n        app: aci-containers-webhook\n    spec:\n      containers:\n      - name: aci-containers-webhook\n        image: noiro/aci-containers-webhook:6.1.2.1.81c2369\n        imagePullPolicy: Always\n        ports:\n        - name: webhook-server\n          containerPort: 8443\n        - name: health-probe\n          containerPort: 8081\n        env:\n        - name: WATCH_NAMESPACE\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              apiVersion: v1\n              fieldPath: metadata.name\n        - name: POD_NAMESPACE\n          valueFrom:\n            fieldRef:\n              apiVersion: v1\n              fieldPath: metadata.namespace\n        - name: REQUIRE_NAD_ANNOTATION\n          value: \"True\"\n        - name: CONTAINER_FOR_ENVVARS\n          value: fabric-peer\n        readinessProbe:\n          failureThreshold: 3\n          httpGet:\n            httpHeaders:\n            - name: Content-Type\n              value: application/json\n            path: /readyz\n            port: health-probe\n            scheme: HTTP\n          initialDelaySeconds: 10\n          periodSeconds: 10\n          successThreshold: 1\n          timeoutSeconds: 1\n        volumeMounts:\n        - mountPath: /tmp/k8s-webhook-server/serving-certs/\n          name: tls-key-pair\n          readOnly: true\n      tolerations:\n      - effect: NoSchedule\n        key: node-role.kubernetes.io/master\n        operator: Exists\n      - effect: NoSchedule\n        key: node-role.kubernetes.io/control-plane\n        operator: Exists\n      priorityClassName: system-cluster-critical\n      restartPolicy: Always\n      serviceAccount: aci-containers-webhook\n      serviceAccountName: aci-containers-webhook\n      volumes:\n      - name: tls-key-pair\n        secret:\n          defaultMode: 420\n          secretName: aci-containers-webhook\n---\napiVersion: v1\nkind: Service\nmetadata:\n  labels:\n    app: aci-containers-webhook\n  name: aci-containers-webhook\n  namespace: aci-containers-system\n  annotations:\n    service.alpha.openshift.io/serving-cert-secret-name:  aci-containers-webhook\nspec:\n  ports:\n  - name: https\n    port: 443\n    protocol: TCP\n    targetPort: 8443\n  selector:\n    app: aci-containers-webhook\n  type: ClusterIP\n---\napiVersion: admissionregistration.k8s.io/v1\nkind: MutatingWebhookConfiguration\nmetadata:\n  labels:\n    app: aci-containers-webhook\n  name: aci-containers-webhook\n  annotations:\n    service.beta.openshift.io/inject-cabundle: \"true\"\nwebhooks:\n- admissionReviewVersions:\n  - v1\n  clientConfig:\n    service:\n      name: aci-containers-webhook\n      namespace: aci-containers-system\n      path: /mutate-nad\n      port: 443\n  failurePolicy: Fail\n  matchPolicy: Equivalent\n  name: aci-containers-webhook-mutate-nad.netop-cni.cisco.com\n  namespaceSelector: {}\n  objectSelector: {}\n  reinvocationPolicy: Never\n  rules:\n  - apiGroups:\n    - k8s.cni.cncf.io\n    apiVersions:\n    - v1\n    operations:\n    - CREATE\n    - UPDATE\n    resources:\n    - network-attachment-definitions\n    scope: '*'\n  sideEffects: None\n  timeoutSeconds: 10\n---\napiVersion: admissionregistration.k8s.io/v1\nkind: ValidatingWebhookConfiguration\nmetadata:\n  labels:\n    app: aci-containers-webhook\n  name: aci-containers-webhook\n  annotations:\n    service.beta.openshift.io/inject-cabundle: \"true\"\nwebhooks:\n- admissionReviewVersions:\n  - v1\n  clientConfig:\n    service:\n      name: aci-containers-webhook\n      namespace: aci-containers-system\n      path: /validate-networkfabricconfiguration\n      port: 443\n  failurePolicy: Fail\n  matchPolicy: Equivalent\n  name: aci-containers-webhook-validate-networkfabricconfiguration.netop-cni.cisco.com\n  namespaceSelector: {}\n  objectSelector: {}\n  rules:\n  - apiGroups:\n    - aci.fabricattachment\n    apiVersions:\n    - v1\n    operations:\n    - CREATE\n    - UPDATE\n    resources:\n    - networkfabricconfigurations\n    scope: '*'\n  sideEffects: None\n  timeoutSeconds: 10\n"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: acc-provision-config
  namespace: aci-containers-system
  labels:
    aci-containers-config-version: "dummy"
    network-plugin: aci-containers
data:
  spec: |-
    {
        "acc_provision_input": {
            "operator_managed_config": {
                "enable_updates": false
            },
            "aci_config": {
                "system_id": "kube",
                "apic_hosts": [
                    "10.30.120.100"
                ],
                "aep": "kube-aep",
                "secondary_aep": "kube-aep-2",
                "vrf": {
                    "name": "kube",
                    "tenant": "common"
                },
                "sync_login": {
                    "certfile": "user.crt", 
                    "keyfile": "user.key"
                },
                "vmm_domain": {
                    "type": "Kubernetes",
                    "encap_type": "vxlan",
                    "mcast_fabric": "225.1.2.3",
                    "mcast_range": {
                        "start": "225.20.1.1",
                        "end": "225.20.255.255"
                    }
                },
                "l3out": {
                    "name": "l3out",
                    "external_networks": [
                        "default"
                    ]
                }
            },
            "chained_cni_config": {
                "secondary_interface_chaining": true,
                "secondary_vlans": [
                    "4002",
                    "4003, 4009",
                    "4004-4007"
                ],
                "primary_cni_path": "/mnt/cni-conf/cni/net.d/10-ovn-kubernetes.conf"
                "require_annotation_for_nad_mutation_webhook": true
            },
            "net_config": {
                "kubeapi_vlan": 4001,
                "node_subnet": "10.1.0.1/16",
            }
        }
     }
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: aci-containers-config
  namespace: aci-containers-system
  labels:
    aci-containers-config-version: "dummy"
    network-plugin: aci-containers
data:
  controller-config: |-
    {
        "flavor": "openshift-sdn-ovn-baremetal",
        "log-level": "info",
        "apic-hosts": [
            "10.30.120.100"
        ],
        "aci-additional-aep": "kube-aep-2",
        "chained-mode": true,
        "primary-cni-path": "/mnt/cni-conf/cni/net.d/10-ovn-kubernetes.conf",
        "aci-phys-dom": "kube-physdom",
        "apic-username": "kube",
        "apic-private-key-path": "/usr/local/etc/aci-cert/user.key",
        "aci-prefix": "kube",
        "aci-vmm-type": "Kubernetes",
        "aci-vmm-domain": "kube",
        "aci-vmm-controller": "kube",
        "aci-use-global-scope-vlan": false,
        "aci-policy-tenant": "kube",
        "aci-nodebd-dn": "uni/tn-kube/BD-netop-nodes",
        "aci-service-phys-dom": "kube-physdom",
        "aci-service-encap": "vlan-None",
        "aci-pbr-tracking-non-snat": false,
        "aci-vrf-tenant": "common",
        "aci-vrf-dn": "uni/tn-common/ctx-kube",
        "aci-vrf": "kube",
        "aci-l3out": "l3out",
        "aci-ext-networks": [
            "default"
        ]
    }
  host-agent-config: |-
    {
        "flavor": "openshift-sdn-ovn-baremetal",
        "app-profile": "netop-kube",
        "chained-mode": true,
        "enable-chained-secondary": true,
        "primary-cni-path": "/mnt/cni-conf/cni/net.d/10-ovn-kubernetes.conf",
        "log-level": "info",
        "aci-vmm-type": "Kubernetes",
        "aci-vmm-domain": "kube",
        "aci-vmm-controller": "kube",
        "aci-vrf": "kube",
        "aci-vrf-tenant": "common",
        "aci-prefix": "kube",
        "kubeapi-vlan": 4001,
        "node-subnet": "10.1.0.1/16",
        "aci-use-global-scope-vlan": false,
        "enable-drop-log": true,
        "enable-nodepodif": false
    }
---
apiVersion: v1
kind: Secret
metadata:
  name: aci-user-cert
  namespace: aci-containers-system
  labels:
    aci-containers-config-version: "dummy"
data:
  user.key: ZHVtbXkK
  user.crt: ZHVtbXkK
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: aci-containers-controller
  namespace: aci-containers-system
  labels:
    aci-containers-config-version: "dummy"
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: aci-containers-host-agent
  namespace: aci-containers-system
  labels:
    aci-containers-config-version: "dummy"
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    aci-containers-config-version: "dummy"
    network-plugin: aci-containers
  name: aci-containers-controller
rules:
- apiGroups:
  - ""
  resources:
  - nodes
  - namespaces
  - pods
  - endpoints
  - services
  - events
  - replicationcontrollers
  - serviceaccounts
  verbs:
  - list
  - watch
  - get
  - patch
  - create
  - update
  - delete
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - list
  - watch
  - get
  - create
  - update
  - delete
- apiGroups:
  - "apiextensions.k8s.io"
  resources:
  - customresourcedefinitions
  verbs:
  - '*'
- apiGroups:
  - "rbac.authorization.k8s.io"
  resources:
  - clusterroles
  - clusterrolebindings
  verbs:
  - '*'
- apiGroups:
  - "networking.k8s.io"
  resources:
  - networkpolicies
  verbs:
  - list
  - watch
  - get
- apiGroups:
  - "apps"
  resources:
  - deployments
  - replicasets
  - daemonsets
  - statefulsets
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - nodes
  - services/status
  verbs:
  - update
- apiGroups:
  - "monitoring.coreos.com"
  resources:
  - servicemonitors
  verbs:
  - get
  - create
- apiGroups:
  - "aci.snat"
  resources:
  - snatpolicies/finalizers
  - snatpolicies/status
  - nodeinfos
  verbs:
  - update
  - create
  - list
  - watch
  - get
  - delete
- apiGroups:
  - "aci.snat"
  resources:
  - snatglobalinfos
  - snatpolicies
  - nodeinfos
  - rdconfigs
  verbs:
  - list
  - watch
  - get
  - create
  - update
  - delete
- apiGroups:
  - "aci.qos"
  resources:
  - qospolicies
  verbs:
  - list
  - watch
  - get
  - create
  - update
  - delete
  - patch
- apiGroups:
  - "aci.netflow"
  resources:
  - netflowpolicies
  verbs:
  - list
  - watch
  - get
  - update
- apiGroups:
  - "aci.erspan"
  resources:
  - erspanpolicies
  verbs:
  - list
  - watch
  - get
  - update
- apiGroups:
  - "aci.aw"
  resources:
  - nodepodifs
  verbs:
  - '*'
- apiGroups:
  - apps.openshift.io
  resources:
  - deploymentconfigs
  verbs:
  - list
  - watch
  - get
- apiGroups:
  - discovery.k8s.io
  resources:
  - endpointslices
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - "aci.netpol"
  resources:
  - networkpolicies
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - delete
- apiGroups:
  - "aci.dnsnetpol"
  resources:
  - dnsnetworkpolicies
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - delete
- apiGroups:
  - aci.fabricattachment
  resources:
  - nodefabricnetworkattachments
  - nadvlanmaps
  - networkfabricconfigurations
  - fabricvlanpools
  - networkfabricl3configurations
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - aci.fabricattachment
  resources:
  - nodefabricnetworkl3peers
  verbs:
  - '*'
- apiGroups:
  - aci.fabricattachment
  resources:
  - nadvlanmaps/status
  - fabricvlanpools/status
  - networkfabricl3configurations/status
  verbs:
  - get
  - list
  - watch
  - update
  - patch
- apiGroups:
  - "aci.hpp"
  resources:
  - hostprotpols
  - hostprotremoteipcontainers
  verbs:
  - list
  - watch
  - get
  - create
  - update
  - delete
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    aci-containers-config-version: "dummy"
    network-plugin: aci-containers
  name: aci-containers-host-agent
rules:
- apiGroups:
  - ""
  resources:
  - nodes
  - namespaces
  - pods
  - endpoints
  - services
  - replicationcontrollers
  verbs:
  - list
  - watch
  - get
  - update
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
- apiGroups:
  - "apiextensions.k8s.io"
  resources:
  - customresourcedefinitions
  verbs:
  - list
  - watch
  - get
- apiGroups:
  - "networking.k8s.io"
  resources:
  - networkpolicies
  verbs:
  - list
  - watch
  - get
- apiGroups:
  - "apps"
  resources:
  - deployments
  - replicasets
  verbs:
  - list
  - watch
  - get
- apiGroups:
  - "aci.snat"
  resources:
  - snatpolicies
  - snatglobalinfos
  - rdconfigs
  verbs:
  - list
  - watch
  - get
- apiGroups:
  - "aci.qos"
  resources:
  - qospolicies
  verbs:
  - list
  - watch
  - get
  - create
  - update
  - delete
  - patch
- apiGroups:
  - "aci.droplog"
  resources:
  - enabledroplogs
  - prunedroplogs
  verbs:
  - list
  - watch
  - get
- apiGroups:
  - "aci.snat"
  resources:
  - nodeinfos
  - snatlocalinfos
  verbs:
  - create
  - update
  - list
  - watch
  - get
  - delete
- apiGroups:
  - "config.openshift.io"
  resources:
  - infrastructures
  verbs:
  - get
- apiGroups:
  - discovery.k8s.io
  resources:
  - endpointslices
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - "aci.netpol"
  resources:
  - networkpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - "aci.aw"
  resources:
  - nodepodifs
  verbs:
  - "*"
- apiGroups: ["k8s.cni.cncf.io"]
  resources:
  - '*'
  verbs:
  - '*'
- apiGroups:
  - aci.fabricattachment
  resources:
  - nodefabricnetworkattachments
  - nodefabricnetworkattachments/status
  verbs:
  - "*"
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - list
  - watch
  - get
  - update
- apiGroups:
  - aci.fabricattachment
  resources:
  - nadvlanmaps
  - fabricvlanpools
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - "aci.hpp"
  resources:
  - hostprotpols
  - hostprotremoteipcontainers
  verbs:
  - list
  - watch
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: aci-containers-controller
  labels:
    aci-containers-config-version: "dummy"
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: aci-containers-controller
subjects:
- kind: ServiceAccount
  name: aci-containers-controller
  namespace: aci-containers-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: aci-containers-host-agent
  labels:
    aci-containers-config-version: "dummy"
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: aci-containers-host-agent
subjects:
- kind: ServiceAccount
  name: aci-containers-host-agent
  namespace: aci-containers-system
---
apiVersion: aci.fabricattachment/v1
kind: FabricVlanPool
metadata:
  name: default
  namespace: aci-containers-system
spec:
  vlans:
  - '4002'
  - 4003, 4009
  - 4004-4007
---
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: aci-containers-host
  namespace: aci-containers-system
  labels:
    aci-containers-config-version: "dummy"
    network-plugin: aci-containers
spec:
  updateStrategy:
    type: RollingUpdate
  selector:
    matchLabels:
      name: aci-containers-host
      network-plugin: aci-containers
  template:
    metadata:
      labels:
        name: aci-containers-host
        network-plugin: aci-containers
      annotations:
    spec:
      hostNetwork: true
      hostPID: true
      hostIPC: true
      serviceAccountName: aci-containers-host-agent
      tolerations:
      - operator: Exists
      priorityClassName: acicni-priority
      containers:
      - name: aci-containers-host
        image: noiro/aci-containers-host:6.1.2.1.81c2369
        imagePullPolicy: Always
        securityContext:
          privileged: true
          capabilities:
            add:
            - SYS_ADMIN
            - NET_ADMIN
            - SYS_PTRACE
            - NET_RAW
        env:
        - name: GOTRACEBACK
          value: "2"
        - name: KUBERNETES_NODE_NAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
        - name: TENANT
          value: "kube"
        - name: NODE_EPG
          value: "netop-kube|netop-nodes"
        - name: MULTUS
          value: 'True'
        - name: DURATION_WAIT_FOR_NETWORK
          value: "210"
        - name: CHAINED_MODE
          value: "true"
        - name: PRIMARY_CNI_PATH
          value: "/mnt/cni-conf/cni/net.d/10-ovn-kubernetes.conf"
        volumeMounts:
        - name: cni-bin
          mountPath: /mnt/cni-bin
        - name: cni-conf
          mountPath: /mnt/cni-conf
        - name: hostvar
          mountPath: /usr/local/var
        - name: hostrun
          mountPath: /run
        - name: hostrun
          mountPath: /usr/local/run
        - name: host-config-volume
          mountPath: /usr/local/etc/aci-containers/
        - name: varlogpods
          mountPath: /var/log/pods
          readOnly: true
        - name: varlogcontainers
          mountPath: /var/log/containers
          readOnly: true
        - name: varlibdocker
          mountPath: /var/lib/docker
          readOnly: true
        - mountPath: /run/netns
          name: host-run-netns
          readOnly: true
          mountPropagation: HostToContainer
        - name: multus-cni-conf
          mountPath: /mnt/multus-cni-conf
        livenessProbe:
          failureThreshold: 10
          httpGet:
            path: /status
            port: 8090
            scheme: HTTP
          initialDelaySeconds: 120
          periodSeconds: 60
          successThreshold: 1
          timeoutSeconds: 30
      restartPolicy: Always
      volumes:
      - name: cni-bin
        hostPath:
          path: /var/lib
      - name: cni-conf
        hostPath:
          path: /run/multus
      - name: hostvar
        hostPath:
          path: /var
      - name: hostrun
        hostPath:
          path: /run
      - name: host-config-volume
        configMap:
          name: aci-containers-config
          items:
          - key: host-agent-config
            path: host-agent.conf
      - name: varlogpods
        hostPath:
          path: /var/log/pods
      - name: varlogcontainers
        hostPath:
          path: /var/log/containers
      - name: varlibdocker
        hostPath:
          path: /var/lib/docker
      - name: host-run-netns
        hostPath:
          path: /run/netns
      - name: multus-cni-conf
        hostPath:
          path: /var/run/multus/
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: aci-containers-controller
  namespace: aci-containers-system
  labels:
    aci-containers-config-version: "dummy"
    network-plugin: aci-containers
    name: aci-containers-controller
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      name: aci-containers-controller
      network-plugin: aci-containers
  template:
    metadata:
      name: aci-containers-controller
      namespace: aci-containers-system
      labels:
        name: aci-containers-controller
        network-plugin: aci-containers
    spec:
      hostNetwork: true
      serviceAccountName: aci-containers-controller
      tolerations:
      - effect: NoExecute
        key: node.kubernetes.io/unreachable
        operator: Exists
        tolerationSeconds: 60
      - effect: NoExecute
        key: node.kubernetes.io/not-ready
        operator: Exists
        tolerationSeconds: 60
      - effect: NoSchedule
        key: node.kubernetes.io/not-ready
        operator: Exists
      - effect: NoSchedule
        key: node-role.kubernetes.io/master
        operator: Exists
      priorityClassName: acicni-priority
      containers:
      - name: aci-containers-controller
        image: noiro/aci-containers-controller:6.1.2.1.81c2369
        imagePullPolicy: Always
        env:
        - name: SYSTEM_NAMESPACE
          value: "aci-containers-system"
        volumeMounts:
        - name: controller-config-volume
          mountPath: /usr/local/etc/aci-containers/
        - name: varlogpods
          mountPath: /var/log/pods
          readOnly: true
        - name: varlogcontainers
          mountPath: /var/log/containers
          readOnly: true
        - name: varlibdocker
          mountPath: /var/lib/docker
          readOnly: true
        - name: aci-user-cert-volume
          mountPath: /usr/local/etc/aci-cert/
        livenessProbe:
          failureThreshold: 10
          httpGet:
            path: /status
            port: 8091
            scheme: HTTP
          initialDelaySeconds: 120
          periodSeconds: 60
          successThreshold: 1
          timeoutSeconds: 30
      volumes:
      - name: aci-user-cert-volume
        secret:
          secretName: aci-user-cert
      - name: controller-config-volume
        configMap:
          name: aci-containers-config
          items:
          - key: controller-config
            path: controller.conf
      - name: varlogpods
        hostPath:
          path: /var/log/pods
      - name: varlogcontainers
        hostPath:
          path: /var/log/containers
      - name: varlibdocker
        hostPath:
          path: /var/lib/docker
---
apiVersion: v1
kind: LimitRange
metadata:
  name: memory-limit-range
  namespace: aci-containers-system
spec:
  limits:
  - default:
      memory: 3Gi
    defaultRequest:
      memory: 128Mi
    type: Container
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: aci-containers-webhook
  namespace: aci-containers-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: aci-containers-webhook
rules:
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - mutatingwebhookconfigurations
  - validatingwebhookconfigurations
  verbs:
  - '*'
- apiGroups:
  - k8s.cni.cncf.io
  resources:
  - network-attachment-definitions
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - list
  - get
  - create
  - update
  - watch
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - '*'
- apiGroups:
  - security.openshift.io
  resourceNames:
  - privileged
  resources:
  - securitycontextconstraints
  verbs:
  - use
- apiGroups:
  - aci.fabricattachment
  resources:
  - nodefabricnetworkl3peers
  - networkfabricl3configurations
  - networkfabricconfigurations
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - pods
  verbs:
  - get
  - list
  - watch
  - update
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: aci-containers-webhook
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: aci-containers-webhook
subjects:
- kind: ServiceAccount
  name: aci-containers-webhook
  namespace: aci-containers-system
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: aci-containers-webhook
  name: aci-containers-webhook
  namespace: aci-containers-system
spec:
  replicas: 1
  selector:
    matchLabels:
      app: aci-containers-webhook
  template:
    metadata:
      labels:
        app: aci-containers-webhook
    spec:
      containers:
      - name: aci-containers-webhook
        image: noiro/aci-containers-webhook:6.1.2.1.81c2369
        imagePullPolicy: Always
        ports:
        - name: webhook-server
          containerPort: 8443
        - name: health-probe
          containerPort: 8081
        env:
        - name: WATCH_NAMESPACE
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: REQUIRE_NAD_ANNOTATION
          value: "True"
        - name: CONTAINER_FOR_ENVVARS
          value: fabric-peer
        readinessProbe:
          failureThreshold: 3
          httpGet:
            httpHeaders:
            - name: Content-Type
              value: application/json
            path: /readyz
            port: health-probe
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 1
        volumeMounts:
        - mountPath: /tmp/k8s-webhook-server/serving-certs/
          name: tls-key-pair
          readOnly: true
      tolerations:
      - effect: NoSchedule
        key: node-role.kubernetes.io/master
        operator: Exists
      - effect: NoSchedule
        key: node-role.kubernetes.io/control-plane
        operator: Exists
      priorityClassName: system-cluster-critical
      restartPolicy: Always
      serviceAccount: aci-containers-webhook
      serviceAccountName: aci-containers-webhook
      volumes:
      - name: tls-key-pair
        secret:
          defaultMode: 420
          secretName: aci-containers-webhook
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: aci-containers-webhook
  name: aci-containers-webhook
  namespace: aci-containers-system
  annotations:
    service.alpha.openshift.io/serving-cert-secret-name: aci-containers-webhook
spec:
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: 8443
  selector:
    app: aci-containers-webhook
  type: ClusterIP
---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  labels:
    app: aci-containers-webhook
  name: aci-containers-webhook
  annotations:
    service.beta.openshift.io/inject-cabundle: "true"
webhooks:
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: aci-containers-webhook
      namespace: aci-containers-system
      path: /mutate-nad
      port: 443
  failurePolicy: Fail
  matchPolicy: Equivalent
  name: aci-containers-webhook-mutate-nad.netop-cni.cisco.com
  namespaceSelector: {}
  objectSelector: {}
  reinvocationPolicy: Never
  rules:
  - apiGroups:
    - k8s.cni.cncf.io
    apiVersions:
    - v1
    operations:
    - CREATE
    - UPDATE
    resources:
    - network-attachment-definitions
    scope: '*'
  sideEffects: None
  timeoutSeconds: 10
---
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  labels:
    app: aci-containers-webhook
  name: aci-containers-webhook
  annotations:
    service.beta.openshift.io/inject-cabundle: "true"
webhooks:
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: aci-containers-webhook
      namespace: aci-containers-system
      path: /validate-networkfabricconfiguration
      port: 443
  failurePolicy: Fail
  matchPolicy: Equivalent
  name: aci-containers-webhook-validate-networkfabricconfiguration.netop-cni.cisco.com
  namespaceSelector: {}
  objectSelector: {}
  rules:
  - apiGroups:
    - aci.fabricattachment
    apiVersions:
    - v1
    operations:
    - CREATE
    - UPDATE
    resources:
    - networkfabricconfigurations
    scope: '*'
  sideEffects: None
  timeoutSeconds: 10
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: aci-containers-operator
  namespace: aci-containers-system
  labels:
    aci-containers-config-version: "dummy"
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    aci-containers-config-version: "dummy"
    network-plugin: aci-containers
  name: aci-containers-operator
rules:
- apiGroups:
  - apiextensions.k8s.io
  resources:
  - customresourcedefinitions
  verbs:
  - '*'
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - clusterroles
  - clusterrolebindings
  verbs:
  - '*'
- apiGroups:
  - ''
  resources:
  - nodes
  - namespaces
  - configmaps
  - secrets
  - pods
  - services
  - serviceaccounts
  - serviceaccounts/token
  - endpoints
  - events
  - limitranges
  verbs:
  - '*'
- apiGroups:
  - networking.k8s.io
  resources:
  - networkpolicies
  verbs:
  - list
  - watch
  - get
- apiGroups:
  - "monitoring.coreos.com"
  resources:
  - servicemonitors
  verbs:
  - get
  - create
- apiGroups:
  - apps
  resources:
  - deployments
  - replicasets
  - daemonsets
  - statefulsets
  verbs:
  - '*'
- apiGroups:
  - aci.ctrl
  resources:
  - acicontainersoperators
  - acicontainersoperators/status
  - acicontainersoperators/finalizers
  verbs:
  - '*'
- apiGroups:
  - aci.ctrl
  resources:
  - accprovisioninputs
  - accprovisioninputs/status
  - accprovisioninputs/finalizers
  verbs:
  - '*'
- apiGroups:
  - scheduling.k8s.io
  resources:
  - '*'
  verbs:
  - '*'
- apiGroups:
  - aci.snat
  resources:
  - snatpolicies
  - snatglobalinfos
  - rdconfigs
  verbs:
  - list
  - watch
  - get
- apiGroups:
  - aci.snat
  resources:
  - nodeinfos
  verbs:
  - create
  - update
  - list
  - watch
  - get
- apiGroups:
  - config.openshift.io
  - operator.openshift.io
  resources:
  - '*'
  verbs:
  - '*'
- apiGroups:
  - route.openshift.io
  resources:
  - routes
  verbs:
  - create
  - update
  - list
  - watch
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: aci-containers-operator
  labels:
    aci-containers-config-version: "dummy"
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: aci-containers-operator
subjects:
- kind: ServiceAccount
  name: aci-containers-operator
  namespace: aci-containers-system
